{"version":3,"sources":["./src/app/pages/user/my-profile/my-profile.page.html","./src/app/pages/user/my-profile/my-profile-routing.module.ts","./src/app/pages/user/my-profile/my-profile.module.ts","./src/app/pages/user/my-profile/my-profile.page.scss","./src/app/pages/user/my-profile/my-profile.page.ts","./src/app/services/transfer-data.service.ts"],"names":[],"mappings":"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","file":"pages-user-my-profile-my-profile-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title> {{ user ? user.last_name +' '+user.first_name : 'My Perfil'}}</ion-title>\\n\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n\\n    <ion-buttons slot=\\\"secondary\\\">\\n      <ion-button (click)=\\\"showEdit()\\\">\\n        <ion-icon name=\\\"create\\\"></ion-icon>      \\n      </ion-button>\\n    </ion-buttons>\\n\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"init($event)\\\">\\n    <ion-refresher-content></ion-refresher-content>\\n  </ion-refresher>\\n\\n  <ion-card *ngIf=\\\"user\\\">\\n    <ion-card-content>\\n\\n      <ion-img-viewer \\n        title=\\\"Foto de Perfil\\\" \\n        [text]=\\\"user.last_name +' '+ user.first_name\\\"\\n        scheme=\\\"dark\\\" \\n        [src]=\\\"getPhoto()\\\">\\n      </ion-img-viewer>\\n\\n    </ion-card-content>\\n    <ion-card-header>\\n      <ion-card-title>\\n        {{user.last_name}} {{user.first_name}}\\n      </ion-card-title>\\n\\n      <ion-card-subtitle>{{user.email}}</ion-card-subtitle>\\n    </ion-card-header>\\n  </ion-card>\\n\\n\\n  <ion-card *ngIf=\\\"user && user.teams\\\">\\n    <ion-card-header>\\n      <ion-card-title>Mis Equipos</ion-card-title>\\n    </ion-card-header>\\n\\n    <ion-card-content>\\n      <ion-list>\\n        <ion-item *ngFor=\\\"let team of user.teams\\\" routerLink=\\\"/team/profile/{{team.id}}\\\" routerDirection=\\\"forward\\\">\\n            {{team.name}}\\n        </ion-item>\\n      </ion-list>\\n    </ion-card-content>\\n  </ion-card>\\n\\n  <ion-card *ngIf=\\\"user && user.player\\\">\\n    <ion-card-header>\\n      <ion-card-title>Mi perfil de Jugador</ion-card-title>\\n    </ion-card-header>\\n\\n    <ion-card-content>\\n      <ion-list>\\n        <ion-item routerLink=\\\"/player/profile/{{user.player.id}}\\\" routerDirection=\\\"forward\\\">\\n            {{user.player.name}}\\n        </ion-item>\\n      </ion-list>\\n    </ion-card-content>\\n  </ion-card>\\n\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { MyProfilePage } from './my-profile.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MyProfilePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class MyProfilePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { MyProfilePageRoutingModule } from './my-profile-routing.module';\n\nimport { MyProfilePage } from './my-profile.page';\nimport { NgxIonicImageViewerModule } from 'ngx-ionic-image-viewer';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    MyProfilePageRoutingModule,\n    NgxIonicImageViewerModule\n  ],\n  declarations: [MyProfilePage]\n})\nexport class MyProfilePageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3VzZXIvbXktcHJvZmlsZS9teS1wcm9maWxlLnBhZ2Uuc2NzcyJ9 */\";","import { Component, OnInit } from '@angular/core';\nimport { AuthUserService } from 'src/app/services/auth-user.service';\nimport { Model } from 'src/app/api/models/model';\nimport { RequestService } from 'src/app/api/request.service';\nimport { ModalController } from '@ionic/angular';\nimport { UserFormPage } from '../user-form/user-form.page';\nimport { TransferDataService } from 'src/app/services/transfer-data.service';\n\n@Component({\n  selector: 'app-my-profile',\n  templateUrl: './my-profile.page.html',\n  styleUrls: ['./my-profile.page.scss'],\n})\nexport class MyProfilePage implements OnInit {\n\n  private user : any;\n  private userModel : Model;\n\n\n  constructor(\n    public authUser : AuthUserService,\n    public requestService : RequestService,\n    public modalController: ModalController,\n    public transferData : TransferDataService,\n  ) { \n    this.userModel = new Model('User',requestService);\n    transferData.setData('test',{id : 'id_lucas_data'});\n    console.log('set data transfer in My Profile', {id : 'id_lucas_data'})\n  }\n\n  ngOnInit() {\n    this.init();\n  }\n\n  async init(event = null){\n    \n    this.user = this.authUser.user; //await this.authUser.getUser();\n    console.log('authUser user' , this.user)\n\n    if(this.user){\n      this.userModel.api_functionModel(this.user.id,'pageMyProfile').subscribe(\n        respose => {\n          console.log('init myProfile',respose)\n          if(respose['status'] == 'success'){\n            this.user = respose['data'];\n            //this.authUser.updateUser(this.user);\n          }\n          if(event)\n            event.target.complete();\n        },\n        error => {\n          console.error(error)\n          if(event)\n            event.target.complete();\n        }\n      \n        )\n    }\n  }\n\n  getPhoto(){\n    return (this.user && this.user.photo ) ? this.user.photo.urlComplete : 'assets/images/profile.jpg' ; \n  }\n\n  async showEdit(){\n    const modal = await this.modalController.create({\n      component: UserFormPage ,\n      componentProps: { id: this.user.id }\n    });\n\n    modal.onDidDismiss().then(async data=>{\n      console.log(data);\n      if(data.data && data.data['user']){\n        let item = data.data['user']\n        this.user.first_name = item.first_name;\n        this.user.last_name = item.last_name;\n        this.user.photo = item.photo;\n        this.user.email = item.email;\n\n        await this.authUser.setUser(this.user);\n      }\n\n    })\n\n    return await modal.present();\n   }\n\n}\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TransferDataService {\n\n  public data : any = {};\n  public callbaks : any  = {};\n\n  constructor() { }\n\n  setData(key, value){\n    this.data[key] = value;\n  }\n\n  getData(key){\n    if(this.data.hasOwnProperty(key))\n      return this.data[key];\n    return null;\n  }\n\n  clear(key = null){\n    if(this.data.hasOwnProperty(key)){\n      delete this.data[key];\n      return;\n    }\n\n    this.data = {};\n  }\n\n  /**\n   * AÃ±ade la funcion que se ejecutara al ejecutar setDataPage \n   * @param page Key de la pagina que deebra obtener los dato\n   * @param callbak funcion que recibe un parametro\n   */\n\n  onSettDataPage(page , callbak){\n    this.callbaks[page] = callbak\n  }\n\n  /**\n   * Ejecuta la funcion que recibe el parametro ingresado en esta funcion\n   * @param page pagina actual\n   * @param parms parametros \n   */\n  setDataPage(page,parms){\n    if( this.callbaks.hasOwnProperty(page))\n      this.callbaks[page](parms)\n  }\n\n}\n"],"sourceRoot":"webpack:///"}